function getCart(){var n=Math.random();$.ajax({type:"GET",cache:!1,url:"/webservice/currentcart.ashx",data:{id:n},dataType:"json",success:function(n){updateCurrentContent(n)},error:function(n){n.status==200}})}function updateCartTotal(n,t,i,r,u){if(n!=null&&t!=null&&(n>0?$("#cartId").html("("+n+")"):$("#cartId").html("")),u>0){$("#messageMast").html('<a href="/shop/wholesale-bulk-baking-supplies/56/">Checkout our wholesale items.<\/a>');return}r="US";var f=0;i&&(f=parseFloat(i.replace(/\$/g,""),10));r=="US"?f==0?$("#messageMast").html('<a href="/customerservice/shippingfaqs.aspx">Your order qualifies for free shipping! (click for eligibility)<\/a>'):f<=20?$("#messageMast").html('<a href="/customerservice/shippingfaqs.aspx">Add '+i+" more to your shopping cart and receive free shipping! $"+FlatRateShippingCost+" shipping on orders under $"+FreeWeShipCost+". (click for eligibility)<\/a>"):$("#messageMast").html('<a href="/customerservice/shippingfaqs.aspx">Free shipping on orders over $'+FreeWeShipCost+". $"+FlatRateShippingCost+" shipping on all orders under $"+FreeWeShipCost+". (click for eligibility)<\/a>"):r=="CA"?$("#messageMast").html("We now support shipping to Canada!"):r=="AU"&&$("#messageMast").html("We now support shipping to Australia!");$("#freeShippingNote").length!=0&&(f==0?$("#freeShippingNote").html(""):$("#freeShippingNote").html("Only "+i+" more until free shipping!"))}function updateCurrentContent(n){updateCartTotal(n.CartCount,n.CartCost,n.AmountTillFreeFlatShip,n.International,n.WholesaleCustomer);n.CartCount!=null&&n.CartCount>0&&$("#checkout").is(":visible")==!1&&($("#checkout").show(),$("#checkout").css("display","inline"))}function addToCart2(n,t,i,r=true){(i==""||i==undefined)&&(i=1);r&&showProgressDialog("Adding item","Adding item to cart...");var u=n,f=i;$.ajax({type:"POST",cache:!1,url:"/webservice/addtocart.ashx",data:{id:u,itemNum:t,quantity:f},dataType:"json",success:function(n){updateCurrentContent(n)},error:function(n){n.status==200&&jsonReturn(n.responseText)}});r&&setTimeout(closeProgressDialog,750)}function addToCart(n,t,i=true){(t==""||t==undefined)&&(t=1);i&&showProgressDialog("Adding item","Adding item to cart...");var r=n,u=t;$.ajax({type:"POST",cache:!1,url:"/webservice/addtocart.ashx",data:{itemNum:r,quantity:u},dataType:"json",success:function(n){updateCurrentContent(n)},error:function(n){n.status==200&&jsonReturn(n.responseText)}});i&&setTimeout(closeProgressDialog,750)}function addMyList(n){if($.cookie("loggedIn")){showProgressDialog("Adding item","Adding item to My List...");var t=n;$.ajax({type:"POST",cache:!1,url:"/webservice/addtomylist.ashx",data:{id:t},dataType:"json",success:function(){},error:function(n){n.status==200&&jsonReturn(n.responseText)}});setTimeout(closeProgressDialog,750)}else window.location="/account/login/?g=0"}function setLogin(){$.cookie("loggedIn")?($("#acc_logout").show(),$("#acc_manage").show(),$("#acc_logout").css("display","inline")):$("#acc_login").show();$.cookie("st")=="1"&&($("#checkout").show(),$("#checkout").css("display","inline"))}function showMessageDialog(n,t){$dialog&&$dialog.remove();$dialog=$(getMessageDialogContent(t)).dialog({minHeight:0,width:250,resizable:!1,modal:!0,closeOnEscape:!1,title:n})}function showProgressDialog(n,t){$dialog&&$dialog.remove();$dialog=$(getProgressDialogContent(t)).dialog({minHeight:0,width:250,resizable:!1,modal:!0,closeOnEscape:!1,title:n})}function getProgressDialogContent(n){var t="<p>"+n+"<\/p>";return"<div><center>"+t+"<center><img style='width:16px;height:16px' src='/images/addtocartwait.gif' /><\/center><\/center><\/div>"}function closeProgressDialog(){$dialog.dialog("close")}function getMessageDialogContent(n){var t="<p>"+n+"<\/p>";return"<div><center>"+t+"<\/center><\/div>"}function getCookie(n){var i=document.cookie.indexOf(n+"="),r=i+n.length+1,t;return!i&&n!=document.cookie.substring(0,n.length)?null:i==-1?null:(t=document.cookie.indexOf(";",r),t==-1&&(t=document.cookie.length),unescape(document.cookie.substring(r,t)))}function getParameterByName(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}var FlatRateShippingCost=6.95,FreeWeShipCost=60,$dialog;